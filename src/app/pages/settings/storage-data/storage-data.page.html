<ion-header>
  <ion-toolbar style="--background: #ffffff; --color: #000000;">
    <ion-buttons slot="start">
      <ion-back-button
        defaultHref="/settings"
        [attr.aria-label]="'common.back' | translate">
      </ion-back-button>
    </ion-buttons>
    <ion-title>{{ 'storage.title' | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" style="--background: #f8f8f8;">
  <!-- Storage overview -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>{{ 'storage.cards.usage.title' | translate }}</ion-card-title>
      <ion-card-subtitle>{{ totalUsedHuman }}</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      <div class="progress-row">
        <ion-progress-bar [value]="storageFraction"></ion-progress-bar>
        <div class="progress-meta">
          <small>{{ 'storage.cards.usage.used' | translate:{ mb: usedMB } }}</small>
          <small>{{ 'storage.cards.usage.total' | translate:{ mb: totalMB } }}</small>
        </div>
      </div>

      <div class="actions">
        <ion-button fill="outline" (click)="analyzeStorage()"
                    [attr.aria-label]="'storage.actions.analyze' | translate">
          <ion-icon slot="start" name="search-outline"></ion-icon>
          {{ 'storage.actions.analyze' | translate }}
        </ion-button>
        <ion-button color="danger" (click)="clearCache()"
                    [attr.aria-label]="'storage.actions.clearCache' | translate">
          <ion-icon slot="start" name="trash-outline"></ion-icon>
          {{ 'storage.actions.clearCache' | translate }}
        </ion-button>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Network usage -->
  <ion-list lines="inset">
    <ion-list-header>
      <ion-label>{{ 'storage.sections.network' | translate }}</ion-label>
    </ion-list-header>

    <ion-item>
      <ion-icon slot="start" name="cloud-upload-outline" aria-hidden="true"></ion-icon>
      <ion-label>
        <h2>{{ 'storage.network.sent.title' | translate }}</h2>
        <p class="muted">{{ 'storage.network.sent.subtitle' | translate:{ val: dataSentHuman } }}</p>
      </ion-label>
      <ion-note slot="end">{{ dataSent }}</ion-note>
    </ion-item>

    <ion-item>
      <ion-icon slot="start" name="cloud-download-outline" aria-hidden="true"></ion-icon>
      <ion-label>
        <h2>{{ 'storage.network.received.title' | translate }}</h2>
        <p class="muted">{{ 'storage.network.received.subtitle' | translate:{ val: dataReceivedHuman } }}</p>
      </ion-label>
      <ion-note slot="end">{{ dataReceived }}</ion-note>
    </ion-item>

    <ion-item lines="none">
      <ion-button fill="clear" (click)="resetNetworkStats()"
                  [attr.aria-label]="'storage.actions.resetStats' | translate">
        {{ 'storage.actions.resetStats' | translate }}
      </ion-button>
    </ion-item>
  </ion-list>

  <!-- Manage storage -->
  <ion-list lines="inset">
    <ion-list-header>
      <ion-label>{{ 'storage.sections.manage' | translate }}</ion-label>
    </ion-list-header>

    <ion-item button detail (click)="openManageStorage()"
              [attr.aria-label]="'storage.manage.title' | translate">
      <ion-icon slot="start" name="folder-open-outline" aria-hidden="true"></ion-icon>
      <ion-label>
        <h2>{{ 'storage.manage.title' | translate }}</h2>
        <p>{{ 'storage.manage.desc' | translate }}</p>
      </ion-label>
    </ion-item>

    <ion-item button detail (click)="openMediaAutoDownload()"
              [attr.aria-label]="'storage.autoDownload.title' | translate">
      <ion-icon slot="start" name="download-outline" aria-hidden="true"></ion-icon>
      <ion-label>
        <h2>{{ 'storage.autoDownload.title' | translate }}</h2>
        <p>{{ 'storage.autoDownload.desc' | translate }}</p>
      </ion-label>
    </ion-item>
  </ion-list>
</ion-content>
