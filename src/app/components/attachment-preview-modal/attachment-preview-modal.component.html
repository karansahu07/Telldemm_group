<ion-header translucent>
  <ion-toolbar>
    <ion-title>Attachment</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="closeModal()">
        <ion-icon name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding" style="display: flex; justify-content: center; align-items: center;">
  <ng-container *ngIf="attachment?.type === 'image'">
    <img [src]="attachment.base64Data" alt="Preview" style="max-width: 100%; border-radius: 10px;" />
  </ng-container>

  <ng-container *ngIf="attachment?.type === 'video'">
    <video controls style="width: 100%; border-radius: 10px;">
      <source [src]="attachment.base64Data" [type]="attachment.mimeType || 'video/mp4'" />
    </video>
  </ng-container>

  <ng-container *ngIf="attachment?.type === 'audio'">
    <audio controls style="width: 100%;">
      <source [src]="attachment.base64Data" [type]="attachment.mimeType || 'audio/mpeg'" />
    </audio>
  </ng-container>

  <ng-container *ngIf="attachment?.type === 'file'">
    <ion-icon name="document-outline" size="large"></ion-icon>
    <p>{{ attachment.fileName }}</p>
    <a [href]="attachment.base64Data" [download]="attachment.fileName" target="_blank" rel="noopener">
      <ion-button expand="block">Download</ion-button>
    </a>
  </ng-container>

  <p *ngIf="attachment?.caption" style="margin-top: 10px; text-align: center;">
    {{ attachment.caption }}
  </p>
</ion-content>
